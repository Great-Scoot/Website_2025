== SETUP ==
Initialize or clone git repo, create .gitignore

Install Postgres, Python, Nodejs

Setup Postgres database

Create secret.env (public.env part of repo)
Update .gitignore

python -m venv venv
source venv/Scripts/activate (or source venv/bin/activate - use bash)

pip install django django-appconf django-cors-headers djangorestframework django-debug-toolbar django-filter djoser python-dotenv django-environ bleach whitenoise gunicorn psycopg[binary]
pip freeze > requirements.txt (or pip install -r requirements.txt)

django-admin startproject [PROJECT-NAME]
cd [PROJECT-NAME]
python manage.py startapp [APP-NAME]

Update settings.py
python manage.py makemigrations
python manage.py migrate

deactivate (reactivate venv as needed)
cd ../

npm init (creates package.json)
Create portfolio_frontend directory (outside of portfolio_backend directory) with source, stage, and public subdirectories

Work on project level urls.py and views.py
Work on app level urls.py and views.py
Create static and template directories
Update settings.py 

Commit

Workflow stuff (dev -> stage -> prod)

Continue developing...

== GIT ==
mkdir -p ~/.ssh
ssh-keygen -t ed25519 -C "your_email@example.com"
eval $(ssh-agent -s)
ssh-add ~/.ssh/id_ed25519
cat ~/.ssh/id_ed25519.pub
Add key to GitHub (GitHub → Settings → SSH and GPG keys → New SSH key)
git clone git@github.com:[PATH-TO-REPO]
mv temp/secret.env [PROJECT-DIRECTORY]/

== POSTGRES ==

== Docker Container ==
pg_ctlcluster 15 main start|stop|status (starts/stops postgres)
sudo -i -u postgres

== Windows ==
psql -U postgres

CREATE USER your_username WITH PASSWORD 'your_password';
CREATE DATABASE your_database_name;
GRANT ALL PRIVILEGES ON DATABASE your_database_name TO your_username;
\c your_database_name
GRANT ALL ON SCHEMA public TO your_username;

== PYTHON ==
python manage.py createsuperuser
python manage.py collectstatic
python manage.py makemigrations
python manage.py migrate

== GREEN UNICORN ==
gunicorn [PROJECT-NAME].wsgi:application --config gunicorn_config.py (starts gunicorn in production - linux only)
pkill gunicorn

== NODE/WEBPACK/REACT ==
npm run webpack:dev
npm run webpack:stage

== CI/CD ==
Set ENV_WEBSITE_VERSION
Set ENV_WEBSITE_MODE to 'stage'
npm run webpack:stage
Commit
SSH to server
./stage_latest.sh (make it executable with chmod +x stage_latest.sh)

== DOCKER ==
docker build -f .Dockerfile -t [NAME-OF-CONTAINER] .
docker run -p 80:80 -p 443:443 [NAME-OF-CONTAINER]
Attach shell

== FIREWALL (N/A to Docker) ==
# Enable UFW
sudo ufw enable

# Allow SSH (important to prevent lockout)
sudo ufw allow ssh

# Allow web traffic
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# Explicitly deny port 8000 to prevent direct Gunicorn access
sudo ufw deny 8000

# Enable logging
sudo ufw logging on
